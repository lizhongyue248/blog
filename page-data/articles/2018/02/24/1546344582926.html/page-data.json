{"componentChunkName":"component---src-templates-post-tsx","path":"/articles/2018/02/24/1546344582926.html","result":{"data":{"asciidoc":{"id":"744ed349-0852-5409-b7ff-7d6e239a0104","fields":{"slug":"/articles/2018/02/24/1546344582926.html","birthTime":"2018-02-24T12:08:00.000Z","modifiedTime":"2019-01-01T12:38:45.739Z"},"html":"<div id=\"toc\" class=\"toc\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div id=\"toctitle\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">Table of Contents</div>\n<ul class=\"sectlevel1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_操作\">操作</a></li>\n</ul>\n</div>\n<div id=\"preamble\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"quoteblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<blockquote>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>在 system1上创建一个Maria DB数据库，名为Contacts，并符合以下条件： 1.\n数据库应该包含来自数据库复制的内容，复制文件的URL为<br>\n<a href=\"http://server.group8.example.com/pub/users.mdb\" class=\"bare\">http://server.group8.example.com/pub/users.mdb</a> ，数据库只能被 localhost\n访问 2. 除了root用户，此数据库只能被用户Luigi查询，此用户密码为 redhat\n3. root 用户的数据库密码为 redhat，同时不允许空密码登录</p>\n</div>\n</blockquote>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_操作\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">操作</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>安装 mariadb 所需组件，为了防止遗漏，此处全部安装</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>    yum install  mariadb*\n    //设置开机启动并开启服务\n    [root@system1 ~]# systemctl enable mariadb.service\n    ln -s '/usr/lib/systemd/system/mariadb.service' '/etc/systemd/system/multi-user.target.wants/mariadb.service'\n    [root@system1 ~]# systemctl start mariadb.service</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>mariadb 安装向导，设置 root 密码</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>    [root@server47 ~]# mysql_secure_installation\n    /usr/bin/mysql_secure_installation: line 379: find_mysql_client: command not found\n\n    NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB\n          SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!\n\n    In order to log into MariaDB to secure it, we'll need the current\n    password for the root user.  If you've just installed MariaDB, and\n    you haven't set the root password yet, the password will be blank,\n    so you should just press enter here.\n\n    Enter current password for root (enter for none):\n    OK, successfully used password, moving on...\n\n    Setting the root password ensures that nobody can log into the MariaDB\n    root user without the proper authorisation.\n\n    Set root password? [Y/n]\n    New password:\n    Re-enter new password:\n    Password updated successfully!\n    Reloading privilege tables..\n     ... Success!\n\n\n    By default, a MariaDB installation has an anonymous user, allowing anyone\n    to log into MariaDB without having to have a user account created for\n    them.  This is intended only for testing, and to make the installation\n    go a bit smoother.  You should remove them before moving into a\n    production environment.\n\n    Remove anonymous users? [Y/n]\n     ... Success!\n\n    Normally, root should only be allowed to connect from 'localhost'.  This\n    ensures that someone cannot guess at the root password from the network.\n\n    Disallow root login remotely? [Y/n]\n     ... Success!\n\n    By default, MariaDB comes with a database named 'test' that anyone can\n    access.  This is also intended only for testing, and should be removed\n    before moving into a production environment.\n\n    Remove test database and access to it? [Y/n]\n     - Dropping test database...\n     ... Success!\n     - Removing privileges on test database...\n     ... Success!\n\n    Reloading the privilege tables will ensure that all changes made so far\n    will take effect immediately.\n\n    Reload privilege tables now? [Y/n]\n     ... Success!\n\n    Cleaning up...\n\n    All done!  If you've completed all of the above steps, your MariaDB\n    installation should now be secure.\n\n    Thanks for using MariaDB!</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>获取表结构以及信息</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>    [root@system1 ~]# wget http://server.group8.example.com/pub/users.mdb\n    --2018-02-28 18:45:37--  http://server.group8.example.com/pub/users.mdb\n    Resolving server.group8.example.com (server.group8.example.com)... 172.24.8.254\n    Connecting to server.group8.example.com (server.group8.example.com)|172.24.8.254|:80... connected.\n    HTTP request sent, awaiting response... 200 OK\n    Length: 4577 (4.5K)\n    Saving to: ‘users.mdb’\n\n    100%[===========================================================================================&gt;] 4,577       --.-K/s   in 0s\n\n    2018-02-28 18:45:37 (234 MB/s) - ‘users.mdb’ saved [4577/4577]</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>登录数据库，并创建库和导入</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>    [root@system1 ~]# mysql -uroot -p\n    Enter password:\n    Welcome to the MariaDB monitor.  Commands end with ; or \\g.\n    Your MariaDB connection id is 12\n    Server version: 5.5.35-MariaDB MariaDB Server\n\n    Copyright (c) 2000, 2013, Oracle, Monty Program Ab and others.\n\n    Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\n    MariaDB [(none)]&gt; CREATE DATABASE Contacts;\n    Query OK, 1 row affected (0.00 sec)\n\n    MariaDB [(none)]&gt; SHOW DATABASES;\n    +--------------------+\n    | Database           |\n    +--------------------+\n    | information_schema |\n    | Contacts           |\n    | mysql              |\n    | performance_schema |\n    +--------------------+\n    4 rows in set (0.00 sec)\n\n    MariaDB [(none)]&gt; USE Contacts;\n    Database changed\n    MariaDB [Contacts]&gt; source /root/users.mdb\n    Query OK, 0 rows affected (0.00 sec)\n\n    ······\n\n    Query OK, 0 rows affected (0.00 sec)\n\n    MariaDB [Contacts]&gt; SHOW TABLES;\n    +--------------------+\n    | Tables_in_Contacts |\n    +--------------------+\n    | u_loc              |\n    | u_name             |\n    | u_passwd           |\n    +--------------------+\n    3 rows in set (0.00 sec)</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>设置用户权限，通过 ==help grant== 获取帮助</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>    MariaDB [(none)]&gt; help grant\n    Name: 'GRANT'\n    Description:\n    Syntax:\n\n    ······\n\n    Normally, a database administrator first uses CREATE USER to create an\n    account, then GRANT to define its privileges and characteristics. For\n    example:\n\n    CREATE USER 'jeffrey'@'localhost' IDENTIFIED BY 'mypass';\n    GRANT ALL ON db1.* TO 'jeffrey'@'localhost';\n    GRANT SELECT ON db2.invoice TO 'jeffrey'@'localhost';\n    GRANT USAGE ON *.* TO 'jeffrey'@'localhost' WITH MAX_QUERIES_PER_HOUR 90;\n\n    ······\n\n    MariaDB [Contacts]&gt; GRANT SELECT ON Contacts .* to Luigi@'localhost' IDENTIFIED BY 'redhat'; Query OK, 0 rows affected (0.00 sec)</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>完成！</p>\n</div>\n</div>\n</div>","document":{"title":"[rhce] 21 部署 mariadb 数据库"},"pageAttributes":{"category":"rhce","description":"rhce 21 部署 mariadb 数据库","image":"https://img.hacpai.com/bing/20171126.jpg?imageView2/1/w/1280/h/720/interlace/1/q/100","sort":null}}},"pageContext":{"slug":"/articles/2018/02/24/1546344582926.html","next":{"document":{"title":"[rhce] 22 数据库查询"},"fields":{"slug":"/articles/2018/02/25/1546344582745.html"}},"previous":{"document":{"title":"[rhce] 20 配置 ISCSI 的客户端"},"fields":{"slug":"/articles/2018/02/24/1546344585841.html"}}}},"staticQueryHashes":["3069561552","3673333084"]}