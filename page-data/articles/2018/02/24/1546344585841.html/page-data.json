{"componentChunkName":"component---src-templates-post-tsx","path":"/articles/2018/02/24/1546344585841.html","result":{"data":{"asciidoc":{"id":"3a0d07c4-b4bb-509b-ad7f-0b0389d2fa84","fields":{"slug":"/articles/2018/02/24/1546344585841.html","birthTime":"2018-02-23T21:07:00.000Z","modifiedTime":"2019-01-01T12:38:21.509Z"},"html":"<div id=\"toc\" class=\"toc\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div id=\"toctitle\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">Table of Contents</div>\n<ul class=\"sectlevel1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_操作\">操作</a></li>\n</ul>\n</div>\n<div id=\"preamble\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"quoteblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<blockquote>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>配置system2使其能链接在system1上提供的 iqn.2014-08.com.example:system1\n并符合以下要求： 1. ISCISI设备在系统启动的期间自动加载 2.\n块设备ISCISI上包含一个大小为2100MIB的分区，并格式化为ext4 3.\n此分区挂载在/mnt/data上 同时在系统启动的期间自动挂载</p>\n</div>\n</blockquote>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_操作\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">操作</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>安装 ISCSI 客户端工具</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>    yum install iscsi-initiator-utils.i686 -y</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>编辑配置文件</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>    vim /etc/iscsi/initiatorname.iscsi\n    //编辑\n    InitiatorName=iqn.2014-08.com.example:system2</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>通过 ==man iscsiadm== 查找命令发现服务端 ISCSI 并连接</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>···\nEXAMPLES\n       Discover targets at a given IP address:\n\n            iscsiadm --mode discoverydb --type sendtargets --portal 192.168.1.10 --discover\n\n       Login, must use a node record id found by the discovery:\n\n            iscsiadm --mode node --targetname iqn.2001-05.com.doe:test --portal 192.168.1.1:3260 --login\n\n       Logout:\n\n            iscsiadm --mode node --targetname iqn.2001-05.com.doe:test --portal 192.168.1.1:3260 --logout\n···\n\n    [root@system2 Desktop]# iscsiadm --mode discoverydb --type sendtargets --portal 172.24.8.11 --discover\n    172.24.8.11:3260,1 iqn.2014-08.com.example:system1\n    [root@system2 Desktop]# iscsiadm --mode node --targetname iqn.2014-08.com.example:system1 --portal 172.24.8.11:3260 --login\n    Logging in to [iface: default, target: iqn.2014-08.com.example:system1, portal: 172.24.8.11,3260] (multiple)\n    Login to [iface: default, target: iqn.2014-08.com.example:system1, portal: 172.24.8.11,3260] successful.\n    [root@system2 Desktop]# lsblk\n    NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\n    sda      8:0    0   20G  0 disk\n    ├─sda1   8:1    0  9.8G  0 part /\n    └─sda2   8:2    0    2G  0 part [SWAP]\n    sdb      8:16   0    3G  0 disk</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>按照要求，对已成功获取的 ==sdb== 进行分区</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>    [root@system2 Desktop]# fdisk /dev/sdb\n    Welcome to fdisk (util-linux 2.23.2).\n\n    Changes will remain in memory only, until you decide to write them.\n    Be careful before using the write command.\n\n    Device does not contain a recognized partition table\n    Building a new DOS disklabel with disk identifier 0xaeacfbad.\n\n    Command (m for help): n\n    Partition type:\n       p   primary (0 primary, 0 extended, 4 free)\n       e   extended\n    Select (default p): p\n    Partition number (1-4, default 1):\n    First sector (8192-6291455, default 8192):\n    Using default value 8192\n    Last sector, +sectors or +size{K,M,G} (8192-6291455, default 6291455): +2100MIB\n    Unsupported suffix: 'MIB'.\n    Supported: 10^N: KB (KiloByte), MB (MegaByte), GB (GigaByte)\n                2^N: K  (KibiByte), M  (MebiByte), G  (GibiByte)\n    Last sector, +sectors or +size{K,M,G} (8192-6291455, default 6291455): +2100MB\n    Partition 1 of type Linux and of size 2 GiB is set\n\n    Command (m for help): w\n    The partition table has been altered!\n\n    Calling ioctl() to re-read partition table.\n    Syncing disks.\n    [root@system2 Desktop]# partprobe\n    [root@system2 Desktop]# mkdir /mnt/data\n    [root@system2 Desktop]# mkfs.ext4 /dev/sdb1\n    mke2fs 1.42.9 (28-Dec-2013)\n    Filesystem label=\n    OS type: Linux\n    Block size=4096 (log=2)\n    Fragment size=4096 (log=2)\n    Stride=0 blocks, Stripe width=1024 blocks\n    128256 inodes, 513024 blocks\n    25651 blocks (5.00%) reserved for the super user\n    First data block=0\n    Maximum filesystem blocks=526385152\n    16 block groups\n    32768 blocks per group, 32768 fragments per group\n    8016 inodes per group\n    Superblock backups stored on blocks:\n        32768, 98304, 163840, 229376, 294912\n\n    Allocating group tables: done\n    Writing inode tables: done\n    Creating journal (8192 blocks): done\n    Writing superblocks and filesystem accounting information: done</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>实现永久挂载、并查看</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>    [root@system2 Desktop]# vim /etc/fstab\n    /dev/sdb1                       /mnt/data               ext4    _netdev                         0 0\n    [root@system2 Desktop]# mount -a\n    [root@system2 Desktop]# df -hT\n    Filesystem       Type      Size  Used Avail Use% Mounted on\n    /dev/sda1        xfs       9.8G  3.1G  6.7G  32% /\n    devtmpfs         devtmpfs  765M     0  765M   0% /dev\n    tmpfs            tmpfs     773M  176K  773M   1% /dev/shm\n    tmpfs            tmpfs     773M  8.9M  765M   2% /run\n    tmpfs            tmpfs     773M     0  773M   0% /sys/fs/cgroup\n    /dev/sdb1        ext4      1.9G  5.9M  1.8G   1% /mnt/data</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>完成</p>\n</div>\n</div>\n</div>","document":{"title":"[rhce] 20 配置 ISCSI 的客户端"},"pageAttributes":{"category":"rhce","description":"rhce 20 配置 ISCSI 的客户端","image":"https://img.hacpai.com/bing/20180415.jpg?imageView2/1/w/1280/h/720/interlace/1/q/100","sort":null}}},"pageContext":{"slug":"/articles/2018/02/24/1546344585841.html","next":{"document":{"title":"[rhce] 21 部署 mariadb 数据库"},"fields":{"slug":"/articles/2018/02/24/1546344582926.html"}},"previous":{"document":{"title":"[rhce] 19 配置ISCSI服务端"},"fields":{"slug":"/articles/2018/02/23/1546344587014.html"}}}},"staticQueryHashes":["3069561552","3673333084"]}