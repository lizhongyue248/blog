{"componentChunkName":"component---src-templates-post-tsx","path":"/articles/2018/02/20/1546344584550.html","result":{"data":{"asciidoc":{"id":"987392b2-eda2-5c88-bb2c-ed582dc2e9b3","fields":{"slug":"/articles/2018/02/20/1546344584550.html","birthTime":"2018-02-20T08:38:00.000Z","modifiedTime":"2019-01-01T12:42:14.441Z"},"html":"<div id=\"toc\" class=\"toc\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div id=\"toctitle\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">Table of Contents</div>\n<ul class=\"sectlevel1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_操作\">操作</a></li>\n</ul>\n</div>\n<div id=\"preamble\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"quoteblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<blockquote>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>在 desktopX 上挂载一个来自 serverX 上的 NFS 共享，并符合下列要求： -\n/pulbic 共享挂载到本地的 /mnt/nfsmount。 - /protected 挂载到本地的/\nmnt/nfssecure, 并使用安全的方式，密钥下载地址：\n<a href=\"http://classroom.example.com/pub/keytabs/desktop0.keytab\" class=\"bare\">http://classroom.example.com/pub/keytabs/desktop0.keytab</a> - 用户\nldapuserX 能够在 /mnt/nfssecure/project 上创建文件。 -\n这些文件系统在系统启动时自动挂载。</p>\n</div>\n</blockquote>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_操作\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">操作</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>先 <code>showmount</code> 查看一下server0的共享。如果没有，返回检查 server0.</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>showmount -e server0\nExport list for server0:\n/protected 172.25.0.0/24\n/public    172.25.0.0/24</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>建立相应的挂载点 /mnt/nfsmount 、 /mnt/nfssecure</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>mkdir /mnt/nfsmount mkdir /mnt/nfssecure</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>下载kerberos证书到/etc/krb5.keytab</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>wget -O /etc/krb5.keytab http://classroom.example.com/pub/keytabs/desktop0.keytab</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>启动相关服务并设置开机启动</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>systemctl restart nfs-secure\nsystemctl enable nfs-secure</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><code>vim /etc/fstab</code> 使得开机能自动挂载</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>172.25.0.11:/public        /mnt/nfsmount   nfs     defaults                                   0       0\n172.25.0.11:/protected  /mnt/nfssecure   nfs     defaults,sec=krb5p,v4.2        0       0</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>重启服务</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>systemctl restart nfs-server.service</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><code>mount -a</code> 挂载所有选项</p>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>切换用户，尝试访问</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>su - ldapuserX</pre>\n</div>\n</div>\n<div class=\"imageblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<img src=\"https://resources.echocow.cn/image/rhce/1.png\" alt=\"test\">\n</div>\n</div>\n</div>\n</div>","document":{"title":"[rhce] 11 挂载一个NFS共享"},"pageAttributes":{"category":"rhce","description":"rhce 11 挂载一个NFS共享","image":"https://img.hacpai.com/bing/20181128.jpg?imageView2/1/w/1280/h/720/interlace/1/q/100","sort":null}}},"pageContext":{"slug":"/articles/2018/02/20/1546344584550.html","next":{"document":{"title":"[rhce] 12 实现一个web服务器"},"fields":{"slug":"/articles/2018/02/20/1546344585618.html"}},"previous":{"document":{"title":"[rhce] 10 配置 NFS 服务"},"fields":{"slug":"/articles/2018/02/20/1546344584166.html"}}}},"staticQueryHashes":["3069561552","3673333084"]}