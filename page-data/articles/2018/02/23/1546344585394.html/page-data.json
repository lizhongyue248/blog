{"componentChunkName":"component---src-templates-post-tsx","path":"/articles/2018/02/23/1546344585394.html","result":{"data":{"asciidoc":{"id":"1014e3ce-07de-5849-a2dd-72692bd1d7ea","fields":{"slug":"/articles/2018/02/23/1546344585394.html","birthTime":"2018-02-22T16:01:00.000Z","modifiedTime":"2019-01-01T12:37:35.607Z"},"html":"<div id=\"toc\" class=\"toc\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div id=\"toctitle\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">Table of Contents</div>\n<ul class=\"sectlevel1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_操作\">操作</a></li>\n</ul>\n</div>\n<div id=\"preamble\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"quoteblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<blockquote>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>在system1上创建一个脚本，名为/root/mkusers\n,此脚本能实现为系统system1创建本地用户，并且这些用户的用户名来自一个包含用户名列表的文件，同时满足下列要求：\n1. 此脚本要求提供一个参数，此参数就是包含用户名列表的的文件 2.\n如果没有提供参数，此脚本应该给出下面的提示信息Usage：/root/mkusers然后退出并返回相应的值\n3. 如果提供一个不存在的文件名，此脚本应该给出下面的提示信息Input file\nnot found 然后退出并返回相应的值 4. 创建的用户登录shell为/bin/false 5.\n此脚本不需要为用户设置密码 6.\n您可以从下面的URL中获取用户名列表作为测试用http://server.group8.example.com/pub/userlist\n<strong>注意题目要求的脚本文件名称是否带.sh后缀，有就加没有就不加</strong></p>\n</div>\n</blockquote>\n</div>\n<hr>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_操作\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">操作</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>切换到 root 目录，并编辑文件</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>    cd ~\n    vim mkusers</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>编写脚本</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>#! /bin/bash\nif [ $# -eq 0 ];then\n echo 'Usage:/root/mkusers'\n  exit 1\nfi\nif [ ! -f $1 ]; then\n echo 'Input file not found'\n exit 1\nfi\nwhile read line\ndo\n  useradd -s /bin/false $line\ndone &lt; $1\n\n:wq</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>测试</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>chmod  +x  mkusers.sh\nwget  -O /root/userlist http://server.group8.example.com/pub/userlist\n./mkusers userlist\n\nid 用户名  查看用户是否添加\n然后测试文件不存在和没有输入参数的情况是否符合题目要求\n\n[root@system1 ~]# ./mkusers userl\nInput file not found\n[root@system1 ~]# ./mkusers\nUsage:/root/mkusers</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>自己写的</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>#!/bin/bash\n[ ! \"$1\" ] &amp;&amp; {\n    echo \"Usage：/root/mkusers\";\n    exit 1;\n}\npath=\"$1\";\n[ ! -f \"$path\" ] &amp;&amp; {\n    echo \"Input file not found\";\n    exit 2;\n}\n\nfor u in `cat $path`\ndo\n    echo $u;\n    useradd -s /bin/false $u;\ndone</pre>\n</div>\n</div>\n</div>\n</div>","document":{"title":"[rhce] 18 创建一个添加用户的脚本"},"pageAttributes":{"category":"rhce","description":"rhce 18 创建一个添加用户的脚本","image":"https://img.hacpai.com/bing/20180304.jpg?imageView2/1/w/1280/h/720/interlace/1/q/100","sort":null}}},"pageContext":{"slug":"/articles/2018/02/23/1546344585394.html","next":{"document":{"title":"[rhce] 19 配置ISCSI服务端"},"fields":{"slug":"/articles/2018/02/23/1546344587014.html"}},"previous":{"document":{"title":"[rhce] 17 创建一个脚本"},"fields":{"slug":"/articles/2018/02/22/1546344580391.html"}}}},"staticQueryHashes":["3069561552","3673333084"]}