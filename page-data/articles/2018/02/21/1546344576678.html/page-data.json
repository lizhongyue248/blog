{"componentChunkName":"component---src-templates-post-tsx","path":"/articles/2018/02/21/1546344576678.html","result":{"data":{"asciidoc":{"id":"4844c2b3-b665-50ce-a92e-c6bd3926c50c","fields":{"slug":"/articles/2018/02/21/1546344576678.html","birthTime":"2018-02-21T00:49:00.000Z","modifiedTime":"2019-01-01T12:34:56.678Z"},"html":"<div id=\"toc\" class=\"toc\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div id=\"toctitle\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">Table of Contents</div>\n<ul class=\"sectlevel1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_操作\">操作</a></li>\n</ul>\n</div>\n<div id=\"preamble\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"quoteblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<blockquote>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>在 serverX 上扩展你的 web 服务器，为站点 <a href=\"http://wwwX.example.com\" class=\"bare\">http://wwwX.example.com</a>\n创建一个虚拟主机，然后执行以下步骤 - 设置 DocumentRoot 为\n/var/www/virtual - 从 <a href=\"http://classroom.example.com/materials/www.html\" class=\"bare\">http://classroom.example.com/materials/www.html</a>\n下载文件并重命名为 index.html ，不要对文件 index.html 内容做任何修改。 -\n将 index.html 文件放到虚拟主机的 DocumentRoot 目录下，确保floyd\n用户能够在 /var/www/virtual 目录下创建文件。</p>\n</div>\n</blockquote>\n</div>\n<div class=\"quoteblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<blockquote>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><strong>注意：原始站点 <a href=\"http://serverX.example.com\" class=\"bare\">http://serverX.example.com</a>\n必须仍然能够访问，站点的所用的域名网络中已有 DNS 服务器解析</strong></p>\n</div>\n</blockquote>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_操作\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">操作</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>创建文件夹，并下载文件</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>mkdir -p /var/www/virtual\nwget -O /var/www/virtual/index.html http://classroom.example.com/materials/www.html</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>创建新的虚拟主机</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>vim /etc/httpd/conf.d/www47.conf\n&lt;VirtualHost *:80&gt;\n  ServerName www47.example.com\n  DocumentRoot \"/var/www/virtual\"\n  &lt;Directory \"/var/www/virtual\"&gt;\n    Require all granted\n  &lt;/Directory&gt;\n&lt;/VirtualHost&gt;</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>测试配置是否有误</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>apachectl  configtest</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>添加用户，并设置 ACL 权限</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>useradd floyd\nsetfacl -m u:floyd:rwX /var/www/virtual</pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>然后重启服务</p>\n</div>\n<div class=\"literalblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre>systemctl  restart   httpd</pre>\n</div>\n</div>\n</div>\n</div>","document":{"title":"[rhce] 14 配置虚拟主机"},"pageAttributes":{"category":"rhce","description":"rhce 14 配置虚拟主机","image":"https://img.hacpai.com/bing/20180915.jpg?imageView2/1/w/1280/h/720/interlace/1/q/100","sort":null}}},"pageContext":{"slug":"/articles/2018/02/21/1546344576678.html","next":{"document":{"title":"[rhce] 15 配置 web 内容的访问"},"fields":{"slug":"/articles/2018/02/21/1546344577105.html"}},"previous":{"document":{"title":"[rhce] 13 配置安全web服务"},"fields":{"slug":"/articles/2018/02/21/1546344572836.html"}}}},"staticQueryHashes":["3069561552","3673333084"]}