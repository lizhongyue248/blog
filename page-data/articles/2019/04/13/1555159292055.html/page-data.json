{"componentChunkName":"component---src-templates-post-tsx","path":"/articles/2019/04/13/1555159292055.html","result":{"data":{"asciidoc":{"id":"8e3eba71-6a30-550b-96bd-3cb08be105fd","fields":{"slug":"/articles/2019/04/13/1555159292055.html","birthTime":"2019-04-13T12:41:32.107Z","modifiedTime":"2019-04-13T12:46:34.507Z"},"html":"<div id=\"toc\" class=\"toc\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div id=\"toctitle\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">Table of Contents</div>\n<ul class=\"sectlevel1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_问题分析\">问题分析</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_使用_ehcache\">使用 ehcache</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_使用_redis\">使用 redis</a>\n<ul class=\"sectlevel2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_更细致化配置\">更细致化配置</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_总结\">总结</a></li>\n</ul>\n</li>\n</ul>\n</div>\n<div id=\"preamble\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>这两天都在为学校的项目做准备，期间也遇到了很多问题，比如自己写代码生成器，比如授权这些，发现自己还是有点太弱了。但是最为棘手的莫过于缓存的问题。主要原因还是自己太想用\nspring data rest\n了，这个在假期就没有解决缓存的问题，现在还是要来再次面对，不过相隔几个月，今非昔比。</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_问题分析\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">问题分析</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>项目直接使用 spring data rest 进行资源暴露，repository\n完全接手，所以我舍去了 service 层，controller\n也基本没有方法，就算有也被抽象出来了。那么没有 service\n如何做缓存呢？那就是用他 Jpa 底层实现的 hibernate\n了，一级缓存我们是默认开启的，那么我们就要使用 <strong>二级缓存</strong> 来提高性能。</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_使用_ehcache\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">使用 ehcache</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>第一种方式就是使用非常快速的 ehcache 来提高性能，配合 hibernate-jcache\n使用，就可以达到很好的效果，具体如下：</p>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>1、 引入依赖，没有加上版本号是因为 spring boot\n的版本管理会自动下载合适的版本。</p>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-xml\" data-lang=\"xml\">        &lt;!--ehcache--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-jcache&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.ehcache&lt;/groupId&gt;\n            &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\n        &lt;/dependency&gt;</code></pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>2、 添加 <code>ehcache.xml</code> 配置文件</p>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-xml\" data-lang=\"xml\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;eh:config\n        xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'\n        xmlns:eh='http://www.ehcache.org/v3'\n        xsi:schemaLocation=\"http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core-3.3.xsd\"&gt;\n    &lt;eh:persistence directory=\"${java.io.tmpdir}/lesson-cloud-cache-data\"/&gt;\n\n    &lt;eh:cache-template name=\"default\"&gt;\n        &lt;eh:expiry&gt;\n            &lt;eh:ttl unit=\"seconds\"&gt;600&lt;/eh:ttl&gt;\n        &lt;/eh:expiry&gt;\n        &lt;eh:resources&gt;\n            &lt;!--堆内内存可以放2000个条目，超出部分堆外100MB--&gt;\n            &lt;eh:heap unit=\"entries\"&gt;2000&lt;/eh:heap&gt;\n            &lt;eh:offheap unit=\"MB\"&gt;100&lt;/eh:offheap&gt;\n        &lt;/eh:resources&gt;\n    &lt;/eh:cache-template&gt;\n&lt;/eh:config&gt;</code></pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>3、 添加 <code>hibernate.properties</code> 配置文件</p>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-properties\" data-lang=\"properties\">hibernate.format_sql=true\nhibernate.cache.use_second_level_cache=true\nhibernate.cache.use_query_cache=true\nhibernate.cache.region_prefix=gzmu_lesson_cloud_\nhibernate.cache.region.factory_class=org.hibernate.cache.jcache.JCacheRegionFactory\nhibernate.cache.provider_configuration_file_resource_path=ehcache.xml\nhibernate.cache.use_structured_entries=true\nhibernate.generate_statistics=false\nhibernate.javax.cache.missing_cache_strategy=create</code></pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>如果你不喜欢使用 <code>properties</code> 文件，可以在 <code>application.yml</code> 里面配置</p>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-yaml\" data-lang=\"yaml\">spring:\n  jpa:\n    show-sql: true\n    properties:\n      hibernate:\n        generate_statistics: true\n        javax:\n          cache:\n            missing_cache_strategy: create\n        cache:\n          format_sql: true\n          use_second_level_cache: true\n          use_query_cache: true\n          region:\n            factory_class: org.hibernate.cache.jcache.JCacheRegionFactory\n          region_prefix: lesson_cloud_\n          use_structured_entries: true\n          provider_configuration_file_resource_path: ehcache.xml</code></pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>4、 不需要在 service 层添加注解，而是在实体类添加注解，如下：</p>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-java\" data-lang=\"java\">@Data\n@Cacheable // 缓存\n@Table(name = \"sys_log\")\n@Entity(name = \"sys_log\")\n@Where(clause = \"is_enable = 1\")\n@EqualsAndHashCode(callSuper = true)\n@Cache(region = \"sys_log\", usage = CacheConcurrencyStrategy.READ_WRITE ) // 缓存名字以及策略\npublic class SysLog extends BaseEntity {\n    // ...\n}</code></pre>\n</div>\n</div>\n<div class=\"quoteblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<blockquote>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>默认对查询的列表不缓存，一方面是因为命中率低，另一方面查询的列表会因为其中的一个改变就要销毁，操作频繁，没有缓存的必要。</p>\n</div>\n</blockquote>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_使用_redis\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">使用 redis</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>这个是真的搞了好久，因为系统涉及到分布式，所以使用 ehcache\n肯定是不太好的，所以要把它缓存\nredis。一开始自己尝试了很多办法，自己尝试实现一个缓存机制（效率太低并且代码不忍直视）。所以就想到去找别人的，所以在\ngithub 上一搜真的有，找到一个\n<a href=\"https://github.com/debop/hibernate-redis\">hibernate-redis</a>，但是一使用发现很多很多问题，然后自己一个一个的排除，最后遇到一个无法解决的问题</p>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-none\" data-lang=\"none\">java.lang.IncompatibleClassChangeError: Expected static method org.hibernate.cache.internal.DefaultCacheKeysFactory.createEntityKey(Ljava/lang/Object;Lorg/hibernate/persister/entity/EntityPersister;Lorg/hibernate/engine/spi/SessionFactoryI</code></pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>然后发现这个问题是个 bug，已经在未来的版本解决，见\n<a href=\"https://github.com/debop/hibernate-redis/issues/115\">issue</a>，\n由于没有上传到 maven 仓库，需要自己切换到 2.4\n版本的分支自己构建自己打包，并且还要用本地 jar\n导入的方式导入，实在太过麻烦，暂时放弃。</p>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>然后找资料，网上乱七八糟的一大堆，没一个有用的，重复的还非常多。最后又回到\nhibernate-redis，然后查看的时候发现了他引用了 redisson\n的依赖，就很好奇这个是什么，然后去 <a href=\"https://redisson.org/\">官网</a>\n看了下，发现他是一个 java 的 redis client，可以通过它来操作\nredis，并且观望上给出的标语 &gt; Redis based cache implementations for Java\nlike JCache API, Hibernate 2nd Level Cache, Spring Cache and application\nlevel caching.</p>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>他也可以作为 JCache API, Hibernate, Spring Cache\n的二级缓存，那么是不是意味着我可以用它呢？于是去他的\n<a href=\"https://github.com/redisson/redisson/wiki/14.-%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A1%86%E6%9E%B6%E6%95%B4%E5%90%88\">github\nwiki</a> 看了下，果然有！而且还有 spring cache\n的！不过我们不用，因为我们不用那几个注解来进行缓存控制，而是通过\nhibernate，所以我尝试一下，完美整合！</p>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>1、 导入依赖，不同的是，我们导入的不是 <code>redisson</code> 的依赖，而是\n<code>redisson-hibernate</code> ，这里算是坑到我了，导入 <code>redisson</code> 没用，然后去\nmaven 中央仓库逛了一波才发现\n<code>redisson-hibernate</code>，然后尝试了一波才发现居然可以。</p>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-xml\" data-lang=\"xml\">&lt;!-- 注意先导入你的 hibernate-core --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.redisson&lt;/groupId&gt;\n    &lt;!-- 对于 Hibernate v4.x --&gt;\n    &lt;artifactId&gt;redisson-hibernate-4&lt;/artifactId&gt;\n    &lt;!-- 对于 Hibernate v5.0.x - v5.1.x --&gt;\n    &lt;artifactId&gt;redisson-hibernate-5&lt;/artifactId&gt;\n    &lt;!-- 对于 Hibernate v5.2.x --&gt;\n    &lt;artifactId&gt;redisson-hibernate-52&lt;/artifactId&gt;\n    &lt;!-- 对于 Hibernate v5.3.x - v5.4.x --&gt;\n    &lt;artifactId&gt;redisson-hibernate-53&lt;/artifactId&gt;\n    &lt;version&gt;3.10.6&lt;/version&gt;\n&lt;/dependency&gt;</code></pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>2、 添加 <code>hibernate.properties</code> 如下</p>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-properties\" data-lang=\"properties\">hibernate.format_sql=true\nhibernate.cache.use_second_level_cache=true\nhibernate.cache.use_query_cache=true\nhibernate.cache.region_prefix=gzmu_lesson_cloud_\nhibernate.cache.region.factory_class=org.redisson.hibernate.RedissonRegionFactory\nhibernate.cache.redisson.config=redisson.yaml\nhibernate.cache.use_structured_entries=true\nhibernate.generate_statistics=false\nhibernate.javax.cache.missing_cache_strategy=create</code></pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>3、 添加 <code>redisson.yaml</code> 如下</p>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-yaml\" data-lang=\"yaml\"># 配置参见 https://github.com/redisson/redisson/wiki/2.-%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95\n\n# 单节点设置，其余模式待测试\nsingleServerConfig:\n  idleConnectionTimeout: 10000\n  pingTimeout: 1000\n  connectTimeout: 1000\n  timeout: 1000\n  retryAttempts: 1\n  retryInterval: 1000\n  reconnectionTimeout: 3000\n  failedAttempts: 5\n  password: null\n  subscriptionsPerConnection: 5\n  clientName: null\n  address: \"redis://127.0.0.1:6379\"\n  subscriptionConnectionMinimumIdleSize: 1\n  subscriptionConnectionPoolSize: 25\n  connectionMinimumIdleSize: 5\n  connectionPoolSize: 100\n  database: 0\nthreads: 0\n# Codec\ncodec: !&lt;org.redisson.codec.SnappyCodec&gt; {}\neventLoopGroup: null</code></pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>4、 同样，实体类添加注解</p>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-java\" data-lang=\"java\">@Data\n@Cacheable // 缓存\n@Table(name = \"sys_log\")\n@Entity(name = \"sys_log\")\n@Where(clause = \"is_enable = 1\")\n@EqualsAndHashCode(callSuper = true)\n@Cache(region = \"sys_log\", usage = CacheConcurrencyStrategy.READ_WRITE ) // 缓存名字以及策略\npublic class SysLog extends BaseEntity {\n    // ...\n}</code></pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>5、 测试即可</p>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>不过在使用的时候发现 <code>redisson-hibernate-53</code> 比 <code>redisson-hibernate-52</code>\n少了一些包，其查看 jar 结构的时候会很奇怪</p>\n</div>\n<div class=\"imageblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<img src=\"https://resources.echocow.cn/file/2019/4/13/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20190413103247.png\" alt=\"redisson-hibernate-52\">\n</div>\n</div>\n<div class=\"imageblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<img src=\"https://resources.echocow.cn/file/2019/4/13/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20190413103214.png\" alt=\"redisson-hibernate-53\">\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>使用的时候优势会出问题有时候不会，一开始提示找不到类，试了很多次，后来莫名其妙又可以了。。。。</p>\n</div>\n<div class=\"sect2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h3 id=\"_更细致化配置\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">更细致化配置</h3>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>使用 yaml 进行配置</p>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-yaml\" data-lang=\"yaml\">spring:\n  jpa:\n    show-sql: true\n    properties:\n      hibernate:\n        cache:\n          redisson:\n            config: redisson.yaml\n          region:\n            factory_class: org.redisson.hibernate.RedissonRegionFactory\n          region_prefix: gzmu_lesson_cloud_\n          use_query_cache: true\n          use_second_level_cache: true\n          use_structured_entries: true\n          provider_configuration_file_resource_path: classpath:conf/hibernate-redis.properties\n        format_sql: true\n        generate_statistics: false\n        javax:\n          cache:\n            missing_cache_strategy: create</code></pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>添加 <code>hibernate-redis.properties</code></p>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-properties\" data-lang=\"properties\">##########################################################2\n#\n# properities for hibernate-redis 可以在这里进行更加细致化的 redis 配置\n#\n##########################################################\n\n# Redisson configuration file\nredisson-config=classpath:conf/redisson.yaml\n\n# Cache Expiry settings\n# 'hibernate' is second cache prefix\n# 'common', 'account' is actual region name\nredis.expiryInSeconds.default=120\nredis.expiryInSeconds.hibernate.common=0\nredis.expiryInSeconds.hibernate.account=1200</code></pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><code>redisson</code> 配置同上</p>\n</div>\n<div class=\"quoteblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<blockquote>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>值得注意的是，redis 同样不会缓存查询的列表，理由同上。</p>\n</div>\n</blockquote>\n</div>\n</div>\n<div class=\"sect2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h3 id=\"_总结\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">总结</h3>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>搞这个搞了一天多才成功，集群还没尝试，不过应该不难了，还是需要多多熟悉才行啊。</p>\n</div>\n</div>\n</div>\n</div>","document":{"title":"spring data rest 缓存/spring boot Jpa 二级缓存 ehcache 与 redis"},"pageAttributes":{"category":"spring","description":"spring data rest 缓存/spring boot Jpa 二级缓存 ehcache 与 redis","image":"https://img.hacpai.com/bing/20180104.jpg?imageView2/1/w/960/h/540/interlace/1/q/100","sort":null}}},"pageContext":{"slug":"/articles/2019/04/13/1555159292055.html","next":{"document":{"title":"Manjaro 安装 rabbitmq"},"fields":{"slug":"/articles/2019/05/05/1557020097819.html"}},"previous":{"document":{"title":"智慧树/知到 自动看课脚本 ——js版"},"fields":{"slug":"/articles/2019/04/07/1554643306922.html"}}}},"staticQueryHashes":["3069561552","3673333084"]}