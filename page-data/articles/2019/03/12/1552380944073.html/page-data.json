{"componentChunkName":"component---src-templates-post-tsx","path":"/articles/2019/03/12/1552380944073.html","result":{"data":{"asciidoc":{"id":"1d23c157-c36b-52ce-8e68-f62632c6df34","fields":{"slug":"/articles/2019/03/12/1552380944073.html","birthTime":"2019-03-12T08:55:44.230Z","modifiedTime":"2019-06-09T10:00:50.505Z"},"html":"<div id=\"toc\" class=\"toc\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div id=\"toctitle\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">Table of Contents</div>\n<ul class=\"sectlevel1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_简述\">简述</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_在这之前\">在这之前</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_使用\">使用</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_使用记录\">使用记录</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_更新记录\">更新记录</a>\n<ul class=\"sectlevel2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_2019_3_18_v1_2_0_snapshot\">2019-3-18 v1.2.0-SNAPSHOT</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_2019_3_13_v1_1_0_snapshot\">2019-3-13 v1.1.0-SNAPSHOT</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_2019_3_12_v1_0_0_snapshot\">2019-3-12 v1.0.0-SNAPSHOT</a></li>\n</ul>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_配置\">配置</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_运行\">运行</a>\n<ul class=\"sectlevel2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_独立部署注意事项\">独立部署注意事项</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_tomcat_部署注意事项\">tomcat 部署注意事项</a></li>\n</ul>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_其它\">其它</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_示例\">示例</a>\n<ul class=\"sectlevel2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_独立部署\">独立部署</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_tomcat_部署\"><code>Tomcat</code> 部署</a></li>\n</ul>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_说明\">说明</a>\n<ul class=\"sectlevel2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_独立部署_2\">独立部署</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_tomcat_部署_2\">Tomcat 部署</a></li>\n</ul>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_我的配置\">我的配置</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_未来\">未来</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_构建\">构建</a></li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><a href=\"#_结语\">结语</a></li>\n</ul>\n</div>\n<div id=\"preamble\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>最近很是焦虑啊，有时候想不清楚自己要干嘛。所以干脆懒得想，找点事做吧。自己搭建\n<code>solo</code> 也有三个多月了，从 <code>v2.8.0</code> 一直到现在的\n<code>v3.2.0</code>，一直很喜欢这种社区与博客的交互方式。中间升级过很多版本，自己也有不下五次的升级经历了，修改了很多皮肤，但是头疼的就是更新问题，每次都要上服务器，所以有点难受。自己写了一个自动检测更新。自动更新的，当然是自用的，所以只支持\n<code>linux 系统</code>，可以支持 <code>独立部署</code> 和 <code>Tomcat</code> 部署，我的是 <code>centos</code>\n系统。</p>\n</div>\n<div class=\"exampleblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>github 地址： <a href=\"https://github.com/lizhongyue248/solo-auto\">solo-auto</a></p>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>配置在线生成： <a href=\"https://lizhongyue248.github.io/solo-auto-ui/\">solo-auto-ui</a></p>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>UI 地址： <a href=\"https://github.com/lizhongyue248/solo-auto-ui\">github</a></p>\n</div>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><a href=\"https://vertx.io\"><span class=\"image\"><img src=\"https://img.shields.io/badge/vert.x-3.6.3-purple.svg\" alt=\"image\"></span></a></p>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_简述\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">简述</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>solo 博客独立部署方式自动检测更新。</p>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>功能：自动检测版本，自动下载更新，自动解压，自动复制配置文件以及其他的文件。</p>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><strong>目前仅支持 linux 版本。</strong></p>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_在这之前\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">在这之前</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>仅支持 <code>linux</code> 系统下的独立部署、<code>tomcat</code> 部署。</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>建议您先备份数据库以及配置文件，虽然不对数据库进行任何操作，但是定时备份是好习惯。</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>为避免不必要的错误，请务必使用 <code>root</code> 用户运行。</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>独立部署仅支持系统命令，不能使用别名定义的命令。</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>独立部署请检查 <code>pkill -9 -f org.b3log.solo.Starter</code>\n命令是否能够杀死你的 <code>solo</code> 进程。</p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_使用\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">使用</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>获取最新版本</p>\n</div>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><a href=\"https://github.com/lizhongyue248/solo-auto/releases\">github</a></p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><a href=\"http://downloads.echocow.cn/solo/soloauto-1.2.0-SNAPSHOT-fat.jar\">七牛云</a></p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_使用记录\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">使用记录</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>2019-3-26 早 九点四十六，<code>centos + 独立部署</code>，自动升级至 v3.4.0\n版本成功</p>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><strong class=\"line-through\">警告：DNS\n解析出现一些小问题，不影响使用，但是可以改进。</strong></p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>解决办法：不使用 <code>vertx</code> 自带的 dns 解析，使用本地 dns 解析</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>思路：每次更新都要上去修改 banner 图片的 url</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>解决办法：直接配置 <code>solo-auto</code>\n移动复制功能覆盖皮肤下的图片就好啦=-=好笨还去改 css</p>\n</li>\n</ul>\n</div>\n</li>\n</ul>\n</div>\n<div class=\"imageblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<img src=\"https://resources.echocow.cn/file/2019/3/24/201903261159171111111.png\" alt=\"v3.4.0\">\n</div>\n</div>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>2019-3-18 晚 十二点，<code>centos + 独立部署</code>，自动升级至 v3.3.0 版本成功</p>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><strong class=\"line-through\">已知问题：点对点会由于下载比较慢的问题将错误信息的写入日志</strong></p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>解决办法：完全丢弃超时响应</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><strong class=\"line-through\">已知问题：现在 favicon 可以自由配置</strong></p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>解决办法：所以应该删除默认复制的两个文件</p>\n</li>\n</ul>\n</div>\n</li>\n</ul>\n</div>\n<div class=\"imageblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<img src=\"https://resources.echocow.cn/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20190318085800.png\" alt=\"v3.3.0\">\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_更新记录\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">更新记录</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"sect2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h3 id=\"_2019_3_18_v1_2_0_snapshot\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">2019-3-18 v1.2.0-SNAPSHOT</h3>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>删除默认复制的 <code>favicon</code> 两个文件，见\n<a href=\"https://github.com/b3log/solo/issues/12706?utm_source=hacpai.com\">issue</a></p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>默认检测时间由 <code>6</code> 小时变为 <code>1</code> 小时</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>默认版本修改为 <code>v3.3.0</code></p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>延长 <code>EventBus</code> 超时等待时间</p>\n</li>\n</ul>\n</div>\n<div class=\"quoteblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<blockquote>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><strong>注意：这可能是 <code>v3</code> 版本最后一次更新 <code>solo-auto</code>，因为作为一个辅助\n<code>solo</code> 的存在，不应该让他像 <code>solo</code>\n一样频繁更新。并且现在已有的功能已经适用大多情况，所以以后只要 <code>solo</code>\n不进行大版本的更新或者 <code>solo-auto</code> 出现重大 <code>bug</code>，将不再更新此项目。</strong></p>\n</div>\n</blockquote>\n</div>\n</div>\n<div class=\"sect2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h3 id=\"_2019_3_13_v1_1_0_snapshot\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">2019-3-13 v1.1.0-SNAPSHOT</h3>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>添加 <code>tomcat</code> 部署方式自动检测更新</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>现 <code>homeDir</code> 末尾可以不添加文件分隔符 <code>/</code></p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>现 <code>startCommand</code> 开头可以不添加英文分号 <code>;</code></p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>添加 <code>debug</code> 参数开启运行时的文件路径获取详情</p>\n</li>\n</ul>\n</div>\n</div>\n<div class=\"sect2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h3 id=\"_2019_3_12_v1_0_0_snapshot\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">2019-3-12 v1.0.0-SNAPSHOT</h3>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>独立模式部署</p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_配置\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">配置</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>在线配置生成：https://lizhongyue248.github.io/solo-auto-ui/[solo-auto-ui]</p>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><span class=\"image\"><img src=\"https://resources.echocow.cn/solo/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20190609170931.png\" alt=\"image\"></span></p>\n</div>\n<div class=\"quoteblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<blockquote>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>注意，你的配置将会完全覆盖默认配置！配置文件为 <code>json</code> 格式</p>\n</div>\n</blockquote>\n</div>\n<table class=\"tableblock frame-all grid-all stretch\">\n<colgroup>\n<col style=\"width: 25%;\">\n<col style=\"width: 25%;\">\n<col style=\"width: 25%;\">\n<col style=\"width: 25%;\">\n</colgroup>\n<thead>\n<tr>\n<th class=\"tableblock halign-left valign-top\">属性名</th>\n<th class=\"tableblock halign-left valign-top\">类型</th>\n<th class=\"tableblock halign-left valign-top\">默认值</th>\n<th class=\"tableblock halign-left valign-top\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">latestUrl</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">String</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><a href=\"https://api.github.com/repos/b3log/solo/releases/latest\" class=\"bare\">https://api.github.com/repos/b3log/solo/releases/latest</a></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">最新版本 solo\n的 github restful 接口地址</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">homeDir</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">String</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">/root/</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">解压后的文件夹路径，结尾必须有文件分隔符\n<code>/</code>，当前版本以及新版本都会存放在此目录</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">deploy</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">String</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">solo</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">部署方式，可选 <code>tomcat</code>，其他值无效</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">tomcatDir</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">String</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">solo</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><code>tomcat</code> 部署在 <code>webapps</code> 目录下的 <code>solo</code>\n的文件名称</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">interval</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Number</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">6</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">几小时检测一次版本更新</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">version</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">String</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">v3.3.0</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">当前已经部署的版本号，格式必须与 github 上相同</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">timeOut</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Number</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">30</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Event Bus 等待时间</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">otherFiles</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Array</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">[``favicon.ico'', favicon.png\"]</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">其他的需要移动的文件名称</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">startCommand</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Stirng</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><code>;nohup java -cp WEB-INF/lib/*:WEB-INF/classes org.b3log.solo.Starter &gt;/dev/null 2&gt;&amp;1 &amp;</code></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">启动命令，前面必须加英文符分号 <code>;</code></p></td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_运行\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">运行</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"quoteblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<blockquote>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>请注意：建议以 root 身份运行，否则可能会出现权限问题无法执行命令的情况。</p>\n</div>\n</blockquote>\n</div>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>前台运行，假设配置文件与 <code>jar</code> 包位于同一目录且名称为 <code>solo-auto.json</code></p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><code>java -jar soloauto-1.0.0-SNAPSHOT-fat.jar -conf solo-auto.json</code></p>\n</div>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>后台运行，假设配置文件与 <code>jar</code> 包位于同一目录且名称为 <code>solo-auto.json</code></p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><code>nohup java -jar soloauto-1.0.0-SNAPSHOT-fat.jar -conf solo-auto.json &gt;/dev/null 2&gt;&amp;1 &amp;</code></p>\n</div>\n<div class=\"quoteblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<blockquote>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>建议，先前台运行，检查控制台输出中的配置文件是否有配置错误，确认无误且不报错后，再后台运行。</p>\n</div>\n</blockquote>\n</div>\n<div class=\"sect2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h3 id=\"_独立部署注意事项\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">独立部署注意事项</h3>\n<div class=\"olist arabic\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ol class=\"arabic\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>正在运行的 <code>solo</code> 的文件夹的目录名称必须类似为 <code>solo-v3.1.0</code> 形式。</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>建议以 <code>root</code> 方式运行。</p>\n</li>\n</ol>\n</div>\n</div>\n<div class=\"sect2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h3 id=\"_tomcat_部署注意事项\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">tomcat 部署注意事项</h3>\n<div class=\"olist arabic\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ol class=\"arabic\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>请注意填写以下属性</p>\n</li>\n</ol>\n</div>\n<table class=\"tableblock frame-all grid-all stretch\">\n<colgroup>\n<col style=\"width: 50%;\">\n<col style=\"width: 50%;\">\n</colgroup>\n<thead>\n<tr>\n<th class=\"tableblock halign-left valign-top\">属性</th>\n<th class=\"tableblock halign-left valign-top\">注意</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><code>homeDir</code></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><code>tomcat</code> 的 <code>webapps</code> 目录</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><code>deploy</code></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><code>tomcat</code></p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><code>tomcatDir</code></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><code>tomcat</code> 的 <code>webapps</code> 下的部署 <code>solo</code> 的文件夹名称</p></td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_其它\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">其它</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>Q: 为什么会写这个？</p>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>A: 从 <code>V2.8.0</code> 开始用 <code>solo</code>，至今到了\n<code>V3.2.0</code>，以前除了部署应用的时候上一下服务器，其他时候都用不上，<code>hexo</code>\n这些博客基本很少更新。现在每次更新都要上去重复一边操作，实在太麻烦了。但是又特别喜欢\n<code>solo</code> 这样活跃的博客与社区，所以遇到问题当然是想自己解决下问题。</p>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>Q: 为什么不用 <code>docker</code>？</p>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>A: 服务器资源有限，除了 <code>solo</code> 还运行者其他的应用，运行 <code>docker</code>\n就会有一些资源被占用，并且想自己 <code>DIY</code>\n部分主题比较麻烦，每次都要进服务器，再进容器里面改，为了运行 <code>solo</code>\n直接上 <code>docker</code> 觉得没必要。如果后面还有应用使用 <code>docker</code> 会换，或者 D\n大说的会重写 <code>Docker</code> 镜像构建的时候可能会换。</p>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>Q: 为什么不用 <code>tomcat</code>？</p>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>A: <code>tomcat</code> 跑着其它应用，没做负载均衡，并且担心访问速度，所以直接用\n<code>独立容器 + nginx</code> 部署了。v1.1.0 版本已经可以使用tomcat</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_示例\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">示例</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"sect2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h3 id=\"_独立部署\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">独立部署</h3>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>运行在指定端口：请修改 <code>startCommand</code>, <strong>前面一定要加分号 <code>;</code></strong></p>\n</li>\n</ul>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-json\" data-lang=\"json\">{\n  \"startCommand\":\";nohup java -cp 'WEB-INF/lib/*:WEB-INF/classes' org.b3log.solo.Starter -lp 8765 &gt;/dev/null 2&gt;&amp;1 &amp;\"\n}</code></pre>\n</div>\n</div>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>如果你需要复制其它文件，可以采用这个配置：请修改 <code>otherFiles</code></p>\n</li>\n</ul>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-json\" data-lang=\"json\">{\n  \"homeDir\": \"/root/\",\n  \"version\": \"v3.3.0\",\n  \"otherFiles\": [\n    \"favicon.ico\",\n    \"favicon.png\",\n    \"background.jpg\"\n  ]\n}</code></pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>解释如下:</p>\n</div>\n<table class=\"tableblock frame-all grid-all stretch\">\n<colgroup>\n<col style=\"width: 40%;\">\n<col style=\"width: 30%;\">\n<col style=\"width: 30%;\">\n</colgroup>\n<thead>\n<tr>\n<th class=\"tableblock halign-left valign-top\">属性名</th>\n<th class=\"tableblock halign-left valign-top\">值</th>\n<th class=\"tableblock halign-left valign-top\">解释</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">homeDir</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">/home/echocow/</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">解压后的文件夹路径，结尾必须有文件分隔符，当前版本以及新版本都会存放在此目录</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">version</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">v3.3.0</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">当前已经启动且部署好的 solo 版本</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">otherFiles</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">[<code>favicon.ico'', </code>favicon.png'', ``background.jpg'']</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">其它需要复制的文件，一旦填写，就会覆盖默认的，所以这里要加上默认的，然后多加了\n<code>background.jpg</code></p></td>\n</tr>\n</tbody>\n</table>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>如果你不需要复制其它文件，可以采用这个配置</p>\n</li>\n</ul>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-json\" data-lang=\"json\">{\n  \"homeDir\": \"/home/echocow\",\n  \"version\": \"v3.2.0\"\n}</code></pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>解释如下:</p>\n</div>\n<table class=\"tableblock frame-all grid-all stretch\">\n<colgroup>\n<col style=\"width: 33.3333%;\">\n<col style=\"width: 33.3333%;\">\n<col style=\"width: 33.3334%;\">\n</colgroup>\n<thead>\n<tr>\n<th class=\"tableblock halign-left valign-top\">属性名</th>\n<th class=\"tableblock halign-left valign-top\">值</th>\n<th class=\"tableblock halign-left valign-top\">解释</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">homeDir</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">/home/echocow/</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">解压后的文件夹路径，结尾必须有文件分隔符，当前版本以及新版本都会存放在此目录，默认\n/root/</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">version</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">v3.2.0</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">当前已经启动且部署好的 solo 版本</p></td>\n</tr>\n</tbody>\n</table>\n</div>\n<div class=\"sect2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h3 id=\"_tomcat_部署\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\"><code>Tomcat</code> 部署</h3>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>假设我现在已经部署好了 <code>solo</code>，并且路径为\n<code>/home/echo/Other/apache-tomcat-9.0.16/webapps/solo</code>，配置文件如下：</p>\n</li>\n</ul>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-json\" data-lang=\"json\">{\n  \"homeDir\": \"/home/echo/Other/apache-tomcat-9.0.16/webapps/\",\n  \"deploy\": \"tomcat\",\n  \"tomcatDir\": \"solo\",\n  \"version\": \"v3.2.0\",\n  \"otherFiles\": [\n    \"favicon.ico\",\n    \"favicon.png\",\n    \"background.jpg\"\n  ]\n}</code></pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>其中 <code>deploy</code> 和 <code>tomcatDir</code> 必填</p>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_说明\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">说明</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>使用 vertx 事件驱动，使用 <code>Event Bus</code> 点对点消息模式，<code>MainVerticle</code>\n获取默认配置，再获取用户配置以覆盖默认配置。然后分别部署两个\n<code>Verticle</code>。</p>\n</div>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><code>WebClientVerticle</code> 定时检测版本</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><code>FileVerticle</code> 处理文件下载、移动操作</p>\n</li>\n</ul>\n</div>\n<hr>\n<div class=\"sect2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h3 id=\"_独立部署_2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">独立部署</h3>\n<div class=\"olist arabic\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ol class=\"arabic\" start=\"0\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><code>WebClientVerticle</code>\n检测当前最新版是否与配置中的版本匹配，如果不匹配，携带请求的部分信息通知\n<code>FileVerticle</code>。</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><code>FileVerticle</code>\n使用类名注册一个处理器以接受请求，收到通知以后，获取最新版本。</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>下载最新版本的 <code>war</code> 包，解压，然后移动用户自定义的文件（配置文件中\n<code>otherFiles</code>）。</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>移动 <code>solo</code>\n配置文件：<code>local.properties</code>，<code>latke.properties</code>，<code>solo.properties</code>.</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>复制完毕后，使用 <code>pkill -9 -f org.b3log.solo.Starter</code> 杀死以前的\n<code>solo</code> 进程，</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>使用\n<code>cd 解压后的路径;nohup java -cp WEB-INF/lib/<strong>:WEB-INF/classes org.b3log.solo.Starter &gt;/dev/null 2&gt;&amp;1 &amp;</strong></code>\n命令启动\n<code>solo</code>，后面的启动命令用户可以自定义，*请注意：自定义启动命令前请务必加上分号！</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><code>FileVerticle</code> 执行完毕，回复 <code>WebClientVerticle</code>\n，<code>WebClientVerticle</code> 收到回复日志记录。</p>\n</li>\n</ol>\n</div>\n</div>\n<div class=\"sect2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h3 id=\"_tomcat_部署_2\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">Tomcat 部署</h3>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>这个过程不会重启 tomcat。</p>\n</div>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>0-3 同上</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>修改原来版本的 <code>solo</code> 的文件夹名称为 <code>tomcatDir配置的名称+当前时间</code></p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>修改新下载的 <code>solo</code> 的文件夹名称为 <code>tomcatDir</code> 所配置的参数</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><code>FileVerticle</code> 执行完毕，回复 <code>WebClientVerticle</code>\n，<code>WebClientVerticle</code> 收到回复日志记录。</p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_我的配置\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">我的配置</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>2019 年 3 月 26 日</p>\n</div>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p><code>solo-auto.json</code></p>\n</li>\n</ul>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-json\" data-lang=\"json\">{\n&nbsp;&nbsp;&nbsp;&nbsp;\"startCommand\":\";nohup java -cp 'WEB-INF/lib/*:WEB-INF/classes' org.b3log.solo.Starter -lp 8765 &gt;/root/solo-auto/soloInfo.log 2&gt;&amp;1 &amp;\",\n&nbsp;&nbsp;&nbsp;&nbsp;\"version\":\"v3.4.0\",\n&nbsp;&nbsp;&nbsp;&nbsp;\"otherFiles\":[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"skins/Finding/images/header-bg.jpg\"\n&nbsp;&nbsp;&nbsp;&nbsp;]\n}</code></pre>\n</div>\n</div>\n<div class=\"ulist\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ul data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>启动命令</p>\n</li>\n</ul>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">nohup java -jar soloauto-1.2.0-SNAPSHOT-fat.jar -conf solo-auto.json &gt;/dev/null 2&gt;&amp;1 &amp;</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_未来\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">未来</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"olist arabic\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<ol class=\"arabic\" start=\"0\">\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>目前没有写 <code>windows</code> 的打算。</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>打算加入邮件或者短信通知，以能够更好的感知博客更新变化。</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>考虑是否加入 <code>web</code> 页面，但是觉得没必要。</p>\n</li>\n<li data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>想过做成 <code>solo</code>\n插件，但是文档太少，并且感觉局限性比较大且自己水平有限，所以放弃了。</p>\n</li>\n</ol>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_构建\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">构建</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>测试:</p>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">./mvnw clean test</code></pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>打包</p>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">./mvnw clean package</code></pre>\n</div>\n</div>\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>运行</p>\n</div>\n<div class=\"listingblock\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"content\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">./mvnw clean exec:java</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<h2 id=\"_结语\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">结语</h2>\n<div class=\"sectionbody\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<div class=\"paragraph\" data-sal=\"fade\" data-sal-duration=\"500\" data-sal-repeat=\"true\">\n<p>也不知道能不能帮助到您，不过还是希望这个小东西能够为您带来方便，如果有问题请在\n<a href=\"https://github.com/lizhongyue248/solo-auto/issues\">github</a>\n上提出；如果对您有帮助，欢迎给个 star 哈。</p>\n</div>\n</div>\n</div>","document":{"title":"solo 独立部署和 Tomcat 模式自动更新"},"pageAttributes":{"category":"归档","description":"solo 独立部署和 Tomcat 模式自动更新","image":"https://img.hacpai.com/bing/20180813.jpg?imageView2/1/w/960/h/540/interlace/1/q/100","sort":null}}},"pageContext":{"slug":"/articles/2019/03/12/1552380944073.html","next":{"document":{"title":"高效 manjaro i3 —— 你值得拥有"},"fields":{"slug":"/articles/2019/03/15/1552649977490.html"}},"previous":{"document":{"title":"[阅读] 敏捷软件开发 —— 敏捷开发（二）"},"fields":{"slug":"/articles/2019/03/09/1552119273889.html"}}}},"staticQueryHashes":["3069561552","3673333084"]}